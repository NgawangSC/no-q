<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Queue Status - Q-Less</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="stylesheet" href="/styles/portal.css">
    <link rel="stylesheet" href="/styles/status.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <button class="back-button" onclick="window.location.href='/'">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M25 5L45 15V35L25 45L5 35V15L25 5Z" fill="#0D9488"/>
                        <path d="M25 15L35 20V30L25 35L15 30V20L25 15Z" fill="#14B8A6"/>
                    </svg>
                    <span class="logo-text">Q-Less</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main status-main">
        <div class="container">
            <div class="status-card">
                <!-- Status Header -->
                <div class="status-header">
                    <h1 class="status-title">Your Queue Status</h1>
                    <button id="refreshButton" class="refresh-button">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1 4v6h6M23 20v-6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Refresh
                    </button>
                </div>

                <!-- Loading State -->
                <div id="loadingState" class="loading-state">
                    <div class="spinner"></div>
                    <p>Loading your queue status...</p>
                </div>

                <!-- Status Content -->
                <div id="statusContent" class="status-content" style="display: none;">
                    <!-- Patient Info -->
                    <div class="patient-info-card">
                        <div class="info-row">
                            <span class="info-label">Name:</span>
                            <span id="patientName" class="info-value">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">CID:</span>
                            <span id="patientCid" class="info-value">-</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Queue Number:</span>
                            <span id="queueNumber" class="info-value queue-number">-</span>
                        </div>
                    </div>

                    <!-- Status Badge -->
                    <div id="statusBadge" class="status-badge status-waiting">
                        <span id="statusText">Waiting</span>
                    </div>

                    <!-- Queue Position -->
                    <div id="queuePositionCard" class="queue-position-card">
                        <div class="position-circle">
                            <span id="positionNumber" class="position-number">-</span>
                            <span class="position-label">in queue</span>
                        </div>
                        <p class="position-text">People ahead of you</p>
                    </div>

                    <!-- Estimated Wait Time -->
                    <div class="wait-time-card">
                        <svg class="wait-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke="#10B981" stroke-width="2"/>
                            <path d="M12 6v6l4 2" stroke="#10B981" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <div>
                            <p class="wait-label">Estimated Wait Time</p>
                            <p id="waitTime" class="wait-time">-</p>
                        </div>
                    </div>

                    <!-- Additional Info -->
                    <div class="additional-info">
                        <div class="info-item">
                            <span class="info-item-label">Reason for Visit:</span>
                            <span id="visitReason" class="info-item-value">-</span>
                        </div>
                        <div class="info-item">
                            <span class="info-item-label">Priority:</span>
                            <span id="priorityLevel" class="info-item-value">-</span>
                        </div>
                        <div class="info-item">
                            <span class="info-item-label">Joined At:</span>
                            <span id="joinedTime" class="info-item-value">-</span>
                        </div>
                    </div>

                    <!-- Instructions -->
                    <div class="instructions-card">
                        <h3 class="instructions-title">What to do next:</h3>
                        <ul class="instructions-list">
                            <li>Keep this page open for real-time updates</li>
                            <li>You will be notified when it's your turn</li>
                            <li>Please arrive at the reception when called</li>
                        </ul>
                    </div>
                </div>

                <!-- Error State -->
                <div id="errorState" class="error-state" style="display: none;">
                    <svg class="error-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="12" r="10" stroke="#EF4444" stroke-width="2"/>
                        <path d="M12 8v4M12 16h.01" stroke="#EF4444" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <p id="errorMessage" class="error-message">Failed to load status</p>
                    <button onclick="location.reload()" class="retry-button">Try Again</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p class="footer-text">Â© 2025 Q-Less. All Rights Reserved.</p>
    </footer>

    <script src="/scripts/patient-status.js"></script>
</body>
</html>
